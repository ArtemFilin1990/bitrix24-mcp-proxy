# GitHub Copilot — правила работы в этом репозитории

## 1. Задача
Автоматически анализировать проект, находить ошибки, предлагать фиксы и улучшения. Поддерживать качество TypeScript-кода, MCP-сервера и Bitrix24-интеграции.

## 2. Обязанности Copilot
1. Проверять структуру файлов (`src/`, `build/`, `.github/workflows/`).
2. Выполнять TypeScript-проверки: типы, импорты, интерфейсы, ошибки компиляции.
3. Анализировать зависимости: дубли, устаревшие библиотеки, уязвимости.
4. Проверять MCP-эндпоинты:
   - /mcp
   - list_tools
   - call_tool
   - ping
5. Проверять Bitrix24-интеграцию:
   - crm.deal.get / add / update
   - crm.contact.get
   - crm.company.get
6. Проверять безопасность:
   - токены в коде
   - невалидная обработка входных данных
   - уязвимые зависимости
   - опасные логи
7. Проводить код-ревью:
   - дублирование
   - ошибки логики
   - ошибки async/await
   - нефункциональные участки кода
   - неиспользуемые переменные
8. Создавать тесты:
   - unit для утилит
   - тесты MCP-endpoint
   - mock Bitrix24 API

## 3. Формат отчёта Copilot
Copilot должен отвечать строго в формате:

### Ошибки
- краткое описание

### Улучшения
- предложение улучшения

### Фиксы (готовый код)
```tsx
<исправленный участок кода>
```

## 4. Автоматизация

После каждого коммита Copilot должен:

1. Проанализировать изменения.
2. Составить отчёт.
3. Предложить исправления.
4. Сформировать Pull Request, если исправление очевидно.

## 5. Требования к качеству

- никаких any, кроме явно оправданных
- корректные async/await
- строгие типы для API Bitrix24
- документированный MCP-интерфейс
- отсутствие хардкодов ключей и URL